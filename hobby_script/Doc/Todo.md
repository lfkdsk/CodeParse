# To Do List

17/8/6

* 模拟寄存器：

  这个首先是要抛开解释器，使用类似精简的指令方式去处理，这就需要一系列的语法生成机制，不过这个我在

DragonBookDemo的阶段已经有过尝试了，只需要把指令集存起来搞个虚拟机就好了。

​	比较麻烦的是虚拟机在处理类这种数据结构的时候，我还没太想明白该怎么搞，因为很多的例子都是很文本段的虚拟机模拟，这个自然好写了，所以还要考虑一下。

* 虚拟语言的转换和存储：

  这其中比较靠谱的方法是在AST成型之后进行迭代处理。

  比如进入一个`while`循环：

  ``` java
  L1: // body

  // 这其间全是while的循环体
  	jumpto L1; // 可能会有一个跳转
  L2: // 这里是根本进不去while循环的可能性。
  ```

  存储：最简单的方法应该是转换到文件中，然后每次读取的时候装入一个随便什么的线性结构，这样跳转节点就会更为的方便了。

* 运行：

  运行的时候要有函数栈的模拟。没这个就尴尬了。大概就是这么个流程。首先我试试把文件本身就分成定义区和运行区。然后使用运行栈配合函数调用，首先填充参数，然后指针开始跳转。